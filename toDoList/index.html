<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            background-color: grey;
        }

        .main-container{
            border: 1px solid magenta;
            width: 50vw;
            height: 50vh;
        }

        .to-do-board{
            border: 1px solid magenta;
            width: 50%;
        }
    </style>
</head>

<body>
    
    
    <div class="main-container">
        <!--criar um input que recebe os dados
        criar um btn que envia dos dados para a memoria  -->

        
        <input id="input" type="text" placeholder="Insira a tarefa" autofocus> <button onclick="salvaItem()">add</button>  <button onclick="mostraLista()">Ver lista</button> 
        <!-- <button onclick="apagaItem()">clear</button>  -->
         
        <div id="to-do-board" class="todo_item">
            <ul id="lista">
                
            </ul>
            
        </div>

    </div>
    


    <script>

            let arr = [];
            
            //se não tiver nada salvo então salve em um novo arrey
            if (localStorage.getItem("lista_itens") == null) {
                localStorage.setItem("lista_itens", "[]");
                                        //um colchete entre "" antes da minha key, é como se eu mandasse um arrey p dentro dela
            }

        function salvaItem() {
            //função que vai apenas salvar o elemento no localstorage
            //jogo o input na variavel
            let novoItem = document.getElementById("input").value
              
             //crio uma variavel que recebe o conteudo que foi setado na condição, que no caso é minha key como o arrey
            arr = JSON.parse(localStorage.getItem("lista_itens"));
       
            //agora minha variavel é  como se fosse um arrey, uso o push para pegar os novos inputs
            arr.push(novoItem);

            novoItem.value = " "
            

            // salvo o arr no local storagem com o item que foi jogado para dentro
            localStorage.setItem("lista_itens", JSON.stringify(arr));
            

        }

        function mostraLista() {
        
             
            //testo se meu get não está nulo, caso não esteja trago meu localstorage para uma variavel
            if (localStorage.getItem("lista_itens") != null) {
                let arr = [];
                arr = JSON.parse(localStorage.getItem("lista_itens"));

                let pos = 0
                let lista = document.getElementById("lista");
                lista.innerHTML = ""
                
                for (i in arr) {

                    // const btn = document.createElement("button");

                    // lista.appendChild(btn)

                    lista.innerHTML +=` <li><input type="checkbox"> ${arr[i]} </li> <button onclick="apagaItem(this)">apagar</button>
                    `
                    // pos é a posição do meu i(contador)
                    pos.innerHTML = ""
                    pos = i
                    // btn.setAttribute("onclick", `apagaItem(${pos})`)
                    // console.log(pos)
                }
               
            }    
           
        }

        function apagaItem(e) {
           arr.splice(this, 1)
        }

    
           
            

      

    </script>
</body>

</html>